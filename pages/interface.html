<!DOCTYPE HTML>
 <html>
   <head>    
	   <script src="/socket.io/socket.io.js"></script>
	   <script type="text/javascript" src="colorpicker.js"></script>
	   <link rel="stylesheet" type="text/css" href="themes.css" />
    <script>	  
	var iosocket;
	  
	function initSocketIO()
	{
		iosocket = io.connect();
		iosocket.on('onconnection', function() {
			initButtons();				
	    	});
	}
	
	function initButtons()
	{
		var redBut = document.getElementById("red");
		var greenBut = document.getElementById("green");
		var blueBut = document.getElementById("blue");
		var offBut = document.getElementById("off");
		
		if(redBut.addEventListener){
                	redBut.addEventListener("click", function() {
				iosocket.emit('buttonRed');
			}, false);
                } else if(redBut.attachEvent){
			redBut.attachEvent("onclick", function() {
				iosocket.emit('buttonRed');
			;});
                }

		if(greenBut.addEventListener){
                	greenBut.addEventListener("click", function() {
				iosocket.emit('buttonGreen');
			}, false);
                } else if(greenBut.attachEvent){
			button.attachEvent("onclick", function() {
				iosocket.emit('buttoGreen');
			;});
                }

		if(blueBut.addEventListener){
                	blueBut.addEventListener("click", function() {
				iosocket.emit('buttonBlue');
			}, false);
                } else if(blueBut.attachEvent){
			blueBut.attachEvent("onclick", function() {
				iosocket.emit('buttonBlue');
			;});
                }

		if(offBut.addEventListener){
                	offBut.addEventListener("click", function() {
				iosocket.emit('buttonOff');
			}, false);
                } else if(offBut.attachEvent){
			button.attachEvent("onclick", function() {
				iosocket.emit('buttonOff');
			;});
                }
	}
	
	window.onload = function() {
	     initSocketIO();
        };
      
    </script>
  </head>
  <body>
	<h2>Data to Arduino</h2>
	<input type="button" id="red" value="Red"/>
	<input type="button" id="green" value="Green"/>
	<input type="button" id="blue" value="Blue"/>
	<input type="button" id="off" value="Off"/></br>
	<div id="color-picker" class="cp-default"></div>

	<script type="text/javascript">
		ColorPicker(document.getElementById('color-picker'),function(hex,hsv,rgb){
				iosocket.emit('pickerUp', {rgb.r, rgb.g, rgb.b});
				document.body.style.backgroundColor = hex;
			});
	</script>	
  </body>
</html>
